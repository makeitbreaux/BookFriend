(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{143:function(e,t,a){e.exports=a(285)},148:function(e,t,a){},150:function(e,t,a){},158:function(e,t,a){},175:function(e,t,a){},179:function(e,t){},181:function(e,t){},194:function(e,t){},196:function(e,t){},224:function(e,t){},226:function(e,t){},227:function(e,t){},232:function(e,t){},234:function(e,t){},253:function(e,t){},265:function(e,t){},268:function(e,t){},285:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(136),c=a.n(s),l=(a(148),a(3)),o=a.n(l),m=a(6),u=a(4),i=a(8);var p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=localStorage.getItem(e)||t,n=Object(r.useState)(a),s=Object(u.a)(n,2),c=s[0],l=s[1];return Object(r.useEffect)((function(){console.debug("hooks useLocalStorage useEffect","item=",c),null===c?localStorage.removeItem(e):localStorage.setItem(e,c)}),[e,c]),[c,l]},f=n.a.createContext();a(150);var d=function(e){var t=e.logout,a=Object(r.useContext)(f).currentUser;return console.debug("Navigation","currentUser=",a),n.a.createElement("nav",{className:"Navigation navbar navbar-dark bg-dark navbar-expand-md"},n.a.createElement("img",{src:"bookfriendimg.png",width:"100",height:"100",className:"d-inline-block align-top",alt:""}),n.a.createElement(i.b,{className:"navbar-brand",to:"/"},"BookFriend"),a?n.a.createElement("ul",{className:"navbar-nav ml-auto"},n.a.createElement("li",{className:"nav-item mr-4"},n.a.createElement(i.c,{className:"nav-link",to:"/authors"},"Authors")),n.a.createElement("li",{className:"nav-item mr-4"},n.a.createElement(i.c,{className:"nav-link",to:"/works"},"Works")),n.a.createElement("li",{className:"nav-item mr-4"},n.a.createElement(i.c,{className:"nav-link",to:"/profile"},"Profile")),n.a.createElement("li",{className:"nav-item"},n.a.createElement(i.b,{className:"nav-link",to:"/",onClick:t},"Log out ",a.first_name||a.username))):n.a.createElement("ul",{className:"navbar-nav ml-auto"},n.a.createElement("li",{className:"nav-item mr-4"},n.a.createElement(i.c,{className:"nav-link",to:"/login"},"Login")),n.a.createElement("li",{className:"nav-item mr-4"},n.a.createElement(i.c,{className:"nav-link",to:"/signup"},"Sign Up"))))},b=a(5);a(158);var g=function(){var e=Object(r.useContext)(f).currentUser;return console.debug("Homepage","currentUser=",e),n.a.createElement("div",{className:"Homepage"},n.a.createElement("div",{className:"container text-center"},n.a.createElement("h1",{className:"mb-4 font-weight-bold"},"BookFriend"),n.a.createElement("img",{className:"mx-auto h-30 p-0 m-0 pt-0",src:"./bookfriendimg1.png",alt:"BookFriend"}),n.a.createElement("p",{className:"lead"},"Search for your favorite authors and books information."),e?n.a.createElement("h2",null,"Welcome Back, ",e.firstName||e.username,"! ",n.a.createElement("div",null,n.a.createElement(i.b,{className:"btn btn-info mr-4 mt-4 mb-4",to:"/authors"},"Authors "),n.a.createElement(i.b,{className:"btn btn-info mr-4 mt-4 mb-4",to:"/works"}," Works"))):n.a.createElement("p",null,n.a.createElement(i.b,{className:"btn btn-primary font-weight-bold mr-3",to:"/login"},"Log in"),n.a.createElement(i.b,{className:"btn btn-primary font-weight-bold",to:"/signup"},"Sign up"))))},v=a(19),E=a(11);var h=function(e){var t=e.type,a=void 0===t?"danger":t,r=e.messages,s=void 0===r?[]:r;return console.debug("Alert","type=",a,"messages=",s),n.a.createElement("div",{className:"alert alert-".concat(a),role:"alert"},s.map((function(e){return n.a.createElement("p",{className:"mb-0 small",key:e},e)})))};var N=function(e){var t=e.login,a=Object(b.g)(),s=Object(r.useState)({username:"",password:""}),c=Object(u.a)(s,2),l=c[0],i=c[1],p=Object(r.useState)([]),f=Object(u.a)(p,2),d=f[0],g=f[1];function N(e){return x.apply(this,arguments)}function x(){return(x=Object(m.a)(o.a.mark((function e(r){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.next=3,t(l);case 3:(n=e.sent).success?a.push("/"):g(n.errors);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){var t=e.target,a=t.name,r=t.value;i((function(e){return Object(E.a)(Object(E.a)({},e),{},Object(v.a)({},a,r))}))}return console.debug("LoginForm","login=",typeof t,"formData=",l,"formErrors",d),n.a.createElement("div",{className:"LoginForm"},n.a.createElement("div",{className:"container col-md-6 offset-md-3 col-lg-4 offset-lg-4"},n.a.createElement("h3",{className:"mb-3"},"Log In"),n.a.createElement("div",{className:"card"},n.a.createElement("div",{className:"card-body"},n.a.createElement("form",{onSubmit:N},n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Username"),n.a.createElement("input",{name:"username",className:"form-control",value:l.username,onChange:y,autoComplete:"username",required:!0})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Password"),n.a.createElement("input",{type:"password",name:"password",className:"form-control",value:l.password,onChange:y,autoComplete:"current-password",required:!0})),d.length?n.a.createElement(h,{type:"danger",messages:d}):null,n.a.createElement("button",{className:"btn btn-primary float-right",onSubmit:N},"Submit"))))))},x=a(139),y=a(140),j=a(141),O=a.n(j),k=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_BASE_URL||"https://book-friend.herokuapp.com",w=function(){function e(){Object(x.a)(this,e)}return Object(y.a)(e,null,[{key:"request",value:function(){var t=Object(m.a)(o.a.mark((function t(a){var r,n,s,c,l,m,u=arguments;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},n=u.length>2&&void 0!==u[2]?u[2]:"get",console.debug("API Call:",a,r,n),s="".concat(k,"/").concat(a),c={Authorization:"Bearer ".concat(e.token)},l="get"===n?r:{},t.prev=6,t.next=9,O()({url:s,method:n,data:r,params:l,headers:c});case 9:return t.abrupt("return",t.sent.data);case 12:throw t.prev=12,t.t0=t.catch(6),console.error("API Error:",t.t0.message),m=t.t0.response.data.error,Array.isArray(m)?m:[m];case 17:case"end":return t.stop()}}),t,null,[[6,12]])})));return function(e){return t.apply(this,arguments)}}()},{key:"getCurrentUser",value:function(){var e=Object(m.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("users/".concat(t));case 2:return a=e.sent,e.abrupt("return",a.user);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"login",value:function(){var e=Object(m.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("auth/token",t,"post");case 2:return a=e.sent,e.abrupt("return",a.token);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signup",value:function(){var e=Object(m.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("auth/register",t,"post");case 2:return a=e.sent,e.abrupt("return",a.token);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"saveProfile",value:function(){var e=Object(m.a)(o.a.mark((function e(t,a){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("users/".concat(t),a,"patch");case 2:return r=e.sent,e.abrupt("return",r.user);case 4:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()}]),e}();var S=function(){var e=Object(r.useContext)(f),t=e.currentUser,a=e.setCurrentUser,s=Object(r.useState)({firstName:t.firstName,lastName:t.lastName,email:t.email,username:t.username,password:""}),c=Object(u.a)(s,2),l=c[0],i=c[1],p=Object(r.useState)([]),d=Object(u.a)(p,2),b=d[0],g=d[1],N=Object(r.useState)(!1),x=Object(u.a)(N,2),y=x[0],j=x[1];function O(){return(O=Object(m.a)(o.a.mark((function e(t){var r,n,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r={firstName:l.firstName,lastName:l.lastName,email:l.email,password:l.password},n=l.username,e.prev=3,e.next=6,w.saveProfile(n,r);case 6:s=e.sent,e.next=14;break;case 9:return e.prev=9,e.t0=e.catch(3),g(e.t0),e.abrupt("return");case 14:i((function(e){return Object(E.a)(Object(E.a)({},e),{},{password:""})})),g([]),j(!0),a(s);case 18:case"end":return e.stop()}}),e,null,[[3,9]])})))).apply(this,arguments)}function k(e){var t=e.target,a=t.name,r=t.value;i((function(e){return Object(E.a)(Object(E.a)({},e),{},Object(v.a)({},a,r))})),g([])}return console.debug("ProfileForm","currentUser=",t,"formData=",l,"formErrors=",b,"saveConfirmed=",y),n.a.createElement("div",{className:"col-md-6 col-lg-4 offset-md-3 offset-lg-4"},n.a.createElement("h3",null,"Profile"),n.a.createElement("div",{className:"card"},n.a.createElement("div",{className:"card-body"},n.a.createElement("form",null,n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Username"),n.a.createElement("p",{className:"form-control-plaintext"},l.username)),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"First Name"),n.a.createElement("input",{name:"firstName",className:"form-control",value:l.firstName,onChange:k})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Last Name"),n.a.createElement("input",{name:"lastName",className:"form-control",value:l.lastName,onChange:k})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Email"),n.a.createElement("input",{name:"email",className:"form-control",value:l.email,onChange:k})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Confirm password to make changes:"),n.a.createElement("input",{type:"password",name:"password",className:"form-control",value:l.password,onChange:k})),b.length?n.a.createElement(h,{type:"danger",messages:b}):null,y?n.a.createElement(h,{type:"success",messages:["Updated successfully."]}):null,n.a.createElement("button",{className:"btn btn-primary btn-block mt-4",onClick:function(e){return O.apply(this,arguments)}},"Save Changes")))))};var C=function(e){var t=e.signup,a=Object(b.g)(),s=Object(r.useState)({username:"",password:"",firstName:"",lastName:"",email:""}),c=Object(u.a)(s,2),l=c[0],i=c[1],p=Object(r.useState)([]),f=Object(u.a)(p,2),d=f[0],g=f[1];function N(){return(N=Object(m.a)(o.a.mark((function e(r){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.next=3,t(l);case 3:(n=e.sent).success?a.push("/"):g(n.errors.message);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){var t=e.target,a=t.name,r=t.value;i((function(e){return Object(E.a)(Object(E.a)({},e),{},Object(v.a)({},a,r))}))}return console.debug("SignupForm","signup=",typeof t,"formData=",l,"formErrors=",d),n.a.createElement("div",{className:"SignupForm"},n.a.createElement("div",{className:"container col-md-6 offset-md-3 col-lg-4 offset-lg-4"},n.a.createElement("h2",{className:"mb-3"},"Sign Up"),n.a.createElement("div",{className:"card"},n.a.createElement("div",{className:"card-body"},n.a.createElement("form",{onSubmit:function(e){return N.apply(this,arguments)}},n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Username"),n.a.createElement("input",{name:"username",className:"form-control",value:l.username,onChange:x})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Password"),n.a.createElement("input",{type:"password",name:"password",className:"form-control",value:l.password,onChange:x})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"First name"),n.a.createElement("input",{name:"firstName",className:"form-control",value:l.firstName,onChange:x})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Last name"),n.a.createElement("input",{name:"lastName",className:"form-control",value:l.lastName,onChange:x})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Email"),n.a.createElement("input",{type:"email",name:"email",className:"form-control",value:l.email,onChange:x})),d.length?n.a.createElement(h,{type:"danger",messages:d}):null,n.a.createElement("button",{type:"submit",className:"btn btn-primary float-right"},"Submit"))))))};var _=function(e){var t=e.exact,a=e.path,s=e.children,c=Object(r.useContext)(f).currentUser;return console.debug("PrivateRoute","exact=",t,"path=",a,"currentUser=",c),c?n.a.createElement(b.b,{exact:t,path:a},s):n.a.createElement(b.a,{to:"/login"})};var U=function(e){var t=e.authorName,a=e.birthDate,r=e.topWork,s=e.topSubjects;return n.a.createElement("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg"},n.a.createElement("div",{className:"px-4 py-5 sm:px-6"},n.a.createElement("h3",{className:"text-lg leading-6 font-medium text-gray-900"},"Author Information")),n.a.createElement("div",{className:"border-t border-gray-200"},n.a.createElement("dl",null,n.a.createElement("div",{className:"bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},n.a.createElement("dt",{className:"text-sm font-medium text-gray-500"},"Author Name"),n.a.createElement("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},t)),n.a.createElement("div",{className:"bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},n.a.createElement("dt",{className:"text-sm font-medium text-gray-500"},"Date of Birth"),n.a.createElement("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},a)),n.a.createElement("div",{className:"bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},n.a.createElement("dt",{className:"text-sm font-medium text-gray-500"},"Top Work"),n.a.createElement("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},r)),n.a.createElement("div",{className:"bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},n.a.createElement("dt",{className:"text-sm font-medium text-gray-500"},"Top Subjects"),n.a.createElement("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},s)))))},A=function(){var e=Object(r.useState)({first_name:"",last_name:""}),t=Object(u.a)(e,2),a=t[0],s=t[1],c=Object(r.useState)(""),l=Object(u.a)(c,2),i=l[0],p=l[1],f=Object(r.useState)(""),d=Object(u.a)(f,2),b=d[0],g=d[1],h=Object(r.useState)(""),N=Object(u.a)(h,2),x=N[0],y=N[1],j=Object(r.useState)(""),O=Object(u.a)(j,2),k=O[0],w=O[1],S=n.a.useState(!1),C=Object(u.a)(S,2),_=C[0],A=C[1],L=a.first_name,P=a.last_name,D=function(){return n.a.createElement("div",{id:"results",className:"search-results"},n.a.createElement(U,{authorName:i,birthDate:b,topWork:x,topSubjects:k}))},W=function(e){s(Object(E.a)(Object(E.a)({},a),{},Object(v.a)({},e.target.name,e.target.value)))},F=function(){var e=Object(m.a)(o.a.mark((function e(t){var r,n,s,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,r=a.first_name,n=a.last_name,e.next=5,fetch("https://openlibrary.org/search/authors.json?q="+"".concat(r)+"%20"+"".concat(n),{method:"GET"});case 5:return s=e.sent,e.next=8,s.json();case 8:c=e.sent,p(c.docs[0].name),g(c.docs[0].birth_date),y(c.docs[0].top_work),w(c.docs[0].top_subjects),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),console.error(e.t0);case 18:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}();return n.a.createElement("div",{className:"col-md-6 col-lg-4 offset-md-3 offset-lg-4"},n.a.createElement("h1",{className:"text-center text-lg leading-6 font-medium px-4 py-5 "},"Search for Author Information"),n.a.createElement("div",{className:"card"},n.a.createElement("div",{className:"card-body"},n.a.createElement("form",{onSubmit:F},n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"First Name"),n.a.createElement("input",{type:"text",name:"first_name",placeholder:"First Name",value:L,onChange:function(e){return W(e)},className:"form-control"})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Last Name"),n.a.createElement("input",{type:"text",name:"last_name",placeholder:"Last Name",value:P,onChange:function(e){return W(e)},className:"form-control"})),n.a.createElement("div",{className:"d-grid gap-2"},n.a.createElement("button",{type:"submit",onClick:function(){return A(!0)},className:"btn btn-info btn-block mt-4"}," Search for Author Information "),_?n.a.createElement(D,null):null)))))};var L=function(e){var t=e.name,a=e.works;return n.a.createElement("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg"},n.a.createElement("div",{className:"px-4 py-5 sm:px-6"},n.a.createElement("h3",{className:"text-lg leading-6 font-medium text-gray-900"},"Work Information")),n.a.createElement("div",{className:"border-t border-gray-200"},n.a.createElement("dl",null,n.a.createElement("div",{className:"bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},n.a.createElement("dt",{className:"text-sm font-medium text-gray-500"},"Author Name"),n.a.createElement("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},t)),n.a.createElement("div",{className:"bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},n.a.createElement("dt",{className:"text-sm font-medium text-gray-500"},"Works"),a.map((function(e){return n.a.createElement("div",{key:e},n.a.createElement("ul",{className:"list-disc"},n.a.createElement("li",{key:e.toString()},n.a.createElement("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},e.title))))}))))))},P=function(){var e=Object(r.useState)({first_name:"",last_name:""}),t=Object(u.a)(e,2),a=t[0],s=t[1],c=Object(r.useState)([]),l=Object(u.a)(c,2),i=l[0],p=l[1],f=Object(r.useState)(""),d=Object(u.a)(f,2),b=d[0],g=d[1],h=Object(r.useState)(""),N=Object(u.a)(h,2),x=N[0],y=N[1],j=n.a.useState(!1),O=Object(u.a)(j,2),k=O[0],w=O[1],S=a.first_name,C=a.last_name,_=function(){return n.a.createElement("div",{id:"results",className:"search-results"},n.a.createElement(L,{works:i,name:b}))},U=function(e){s(Object(E.a)(Object(E.a)({},a),{},Object(v.a)({},e.target.name,e.target.value)))},A=function(){var e=Object(m.a)(o.a.mark((function e(t){var r,n,s,c,l,m,u,i,f;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,r=a.first_name,n=a.last_name,e.next=5,fetch("https://openlibrary.org/search/authors.json?q="+"".concat(r)+"%20"+"".concat(n),{method:"GET"});case 5:return s=e.sent,e.next=8,s.json();case 8:return c=e.sent,l=c.docs[0].key,m=c.docs[0].name,y(l),g(m),console.log(x),e.next=16,fetch("http://openlibrary.org/authors/".concat(l,"/works.json?language=eng"),{method:"GET"});case 16:return u=e.sent,e.next=19,u.json();case 19:i=e.sent,f=i.entries,p(f),console.log(i),e.next=28;break;case 25:e.prev=25,e.t0=e.catch(1),console.error(e.t0);case 28:case"end":return e.stop()}}),e,null,[[1,25]])})));return function(t){return e.apply(this,arguments)}}();return n.a.createElement("div",{className:"col-md-6 col-lg-4 offset-md-3 offset-lg-4"},n.a.createElement("h1",{className:"text-center text-lg leading-6 px-4 py-5 font-medium "},"Search for All Works by an Author "),n.a.createElement("div",{className:"card"},n.a.createElement("div",{className:"card-body"},n.a.createElement("form",{onSubmit:A},n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"First Name"),n.a.createElement("input",{type:"text",name:"first_name",id:"first_name",placeholder:"First Name",value:S,onChange:function(e){return U(e)},className:"form-control"})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Last Name"),n.a.createElement("input",{type:"text",name:"last_name",id:"last_name",placeholder:"Last Name",value:C,onChange:function(e){return U(e)},className:"form-control"})),n.a.createElement("div",{className:"d-grid gap-2"},n.a.createElement("button",{type:"submit",onClick:function(){return w(!0)},className:"btn btn-info btn-block mt-4"}," Search for Works of Author "),k?n.a.createElement(_,null):null)))))};var D=function(e){var t=e.login,a=e.signup;return console.debug("Routes","login=".concat(typeof t),"register=".concat(typeof register)),n.a.createElement("div",{className:"pt-5"},n.a.createElement(b.d,null,n.a.createElement(b.b,{exact:!0,path:"/"},n.a.createElement(g,null)),n.a.createElement(b.b,{exact:!0,path:"/login"},n.a.createElement(N,{login:t})),n.a.createElement(b.b,{exact:!0,path:"/signup"},n.a.createElement(C,{signup:a})),n.a.createElement(_,{exact:!0,path:"/authors"},n.a.createElement(A,null)),n.a.createElement(_,{exact:!0,path:"/works"},n.a.createElement(P,null)),n.a.createElement(_,{path:"/profile"},n.a.createElement(S,null)),n.a.createElement(b.a,{to:"/"})))};a(175);var W=function(){return n.a.createElement("div",{className:"LoadingSpinner"},"Loading ...")},F=a(142),I=a.n(F);var T=function(){var e=Object(r.useState)(!1),t=Object(u.a)(e,2),a=t[0],s=t[1],c=Object(r.useState)(null),l=Object(u.a)(c,2),b=l[0],g=l[1],v=p("bookfriend-token"),E=Object(u.a)(v,2),h=E[0],N=E[1];function x(){return(x=Object(m.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.signup(t);case 3:return a=e.sent,N(a),e.abrupt("return",{success:!0});case 8:return e.prev=8,e.t0=e.catch(0),console.error("signup failed",e.t0),e.abrupt("return",{success:!1,errors:[e.t0]});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function y(){return(y=Object(m.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.login(t);case 3:return a=e.sent,N(a),e.abrupt("return",{success:!0});case 8:return e.prev=8,e.t0=e.catch(0),console.error("login failed",e.t0),e.abrupt("return",{success:!1,errors:[e.t0]});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}return console.debug("App","infoLoaded=",a,"currentUser=",b,"token=",h),Object(r.useEffect)((function(){function e(){return(e=Object(m.a)(o.a.mark((function e(){var t,a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h){e.next=14;break}return e.prev=1,t=I.a.decode(h),a=t.username,w.token=h,e.next=6,w.getCurrentUser(a);case 6:r=e.sent,g(r),e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),console.error("App loadUserInfo: problem loading",e.t0),e.abrupt("return",{errors:[e.t0]});case 14:s(!0);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}console.debug("App useEffect loadUserInfo","token=",h),s(!1),function(){e.apply(this,arguments)}()}),[h]),a?n.a.createElement(i.a,null,n.a.createElement(f.Provider,{value:{currentUser:b,setCurrentUser:g}},n.a.createElement("div",{className:"App"},n.a.createElement(d,{logout:function(){g(null),N(null)}}),n.a.createElement(D,{login:function(e){return y.apply(this,arguments)},signup:function(e){return x.apply(this,arguments)}})))):n.a.createElement(W,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(n.a.createElement(T,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[143,1,2]]]);
//# sourceMappingURL=main.4839f213.chunk.js.map